<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5SW8Z5H5');</script>
    <!-- End Google Tag Manager -->

    <link rel="icon" type="image/x-icon" href="/assets/icon/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>কাশ্মিরি</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles to handle specific UI details not easily done with Tailwind defaults */
        .product-quantity-input::-webkit-outer-spin-button,
        .product-quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .product-quantity-input {
            -moz-appearance: textfield;
        }

        /* Order Review Layout Grid */
        .order-item-grid {
            display: grid;
            grid-template-columns: 3fr 1fr;
            align-items: center;
        }

        /* Custom Active/Selected State for Size/Color Boxes */
        .size-box,
        .color-box {
            /* Design classes copied from your file */
            @apply cursor-pointer p-1 text-xs border border-gray-300 rounded-sm hover:border-blue-500 transition duration-100;
        }

        .size-box.selected {
            /* Design classes copied from your file */
            @apply border-green-500 text-green-700 bg-green-50 font-semibold;
        }

        .color-box.selected {
            /* Design classes copied from your file */
            @apply ring-2 ring-offset-1 ring-green-500;
        }

        /* Specific Color styles */
        .color-red {
            background-color: #ef4444;
        }

        /* Tailwind red-500 */
        .color-white {
            background-color: #ffffff;
            border: 1px solid #ccc;
        }

        .color-blue {
            background-color: #3b82f6;
        }

        /* Tailwind blue-500 */


        /* Toast Style for Success */
        .toast-success {
            background-color: #10B981;
            /* Tailwind green-500 */
        }
    </style>

    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '737196476000628'); // <--- আপনার পিক্সেল আইডি বসান
        // 1. PageView Pixel (Already Correctly Placed)
        fbq('track', 'PageView'); 
    </script>

    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=737196476000628&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->


</head>

<body class="bg-gray-50 text-gray-800">


    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SW8Z5H5" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="bg-white shadow-md p-4">
        <div class="logo">
            <img src="assets/logo/Logo.png" alt="Kashmeeri Logo" class="h-14 mx-auto">
    </header>

    <main class="container mx-auto p-4 lg:p-8">


        <!-- Products section -->
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">

            <div class="product-card bg-white border border-gray-200 rounded-lg p-4 text-center shadow-sm relative"
                data-product-id="1" data-base-price="1150" data-product-category="china-jacket">
                <label for="product1" class="cursor-pointer block">
                    <img src="assets/product-img/china-winter-jacket-Black.jpg" alt="China Winter Jacket"
                        class="mx-auto mb-3">
                    <div class="product-details">
                        <h4 class="text-lg font-semibold mb-1">China Winter Jacket</h4>
                        <div class="flex justify-center items-center space-x-2">
                            <span class="old-price text-sm text-orange-600 line-through">Tk 1,590</span>
                            <span class="new-price text-xl font-bold">Tk 1,150</span>
                        </div>

                        <div class="options mt-7 flex flex-col space-y-3 text-left">
                            <div class="flex items-center space-x-2 mb-5">
                                <label class="font-medium text-sm w-12">Size:</label>
                                <div class="size-options flex space-x-2" data-selected-size="M">
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="M">M</span>
                                    <span
                                        class="size-box selected w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="L">L</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XL">XL</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XXL">XXL</span>
                                </div>
                            </div>

                            <div class="flex items-center flex justify-between">
                                <div class="flex items-center space-x-2">
                                    <label class="font-medium text-sm w-12">Color:</label>
                                    <div class="color-options flex space-x-2" data-selected-color="Black">
                                        <span
                                            class="color-box w-14 h-10 text-center flex items-center justify-center border rounded selected"
                                            data-color="Black">Black</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-center align-items-center">
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-l-md border border-gray-300"
                                        data-action="decrease">-</button>
                                    <input type="number"
                                        class="product-quantity-input w-10 text-center border-t border-b border-gray-300 py-1 focus:outline-none"
                                        value="1" min="1" readonly>
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-r-md border border-gray-300"
                                        data-action="increase">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </label>
                <div class="mt-4 flex space-x-2">
                    <button aria-pressed="false"
                        class="add-to-cart-btn w-1/2 px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                        data-product-id="1">Add to Cart</button>

                    <button
                        class="view-details-btn w-1/2 px-3 py-2 bg-gray-400 text-gray-800 text-sm rounded hover:bg-gray-500"
                        data-product-id="1">View Details</button>
                </div>
            </div>

            <div class="product-card bg-white border border-gray-200 rounded-lg p-4 text-center shadow-sm relative"
                data-product-id="2" data-base-price="1150" data-product-category="china-jacket">
                <label for=" product2" class="cursor-pointer block">
                    <img src="assets/product-img/china-winter-jacket-meron.jpg" alt="China Winter Jacket"
                        class="mx-auto mb-3">
                    <div class="product-details">
                        <h4 class="text-lg font-semibold mb-1">China Winter Jacket</h4>
                        <div class="flex justify-center items-center space-x-2">
                            <span class="old-price text-sm text-orange-600 line-through">Tk 1,590</span>
                            <span class="new-price text-xl font-bold">Tk 1,150</span>
                        </div>

                        <div class="options mt-7 flex flex-col space-y-3 text-left">
                            <div class="flex items-center space-x-2 mb-5">
                                <label class="font-medium text-sm w-12">Size:</label>
                                <div class="size-options flex space-x-2" data-selected-size="M">
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="M">M</span>
                                    <span
                                        class="size-box selected w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="L">L</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XL">XL</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XXL">XXL</span>
                                </div>
                            </div>

                            <div class="flex items-center flex justify-between">
                                <div class="flex items-center space-x-2">
                                    <label class="font-medium text-sm w-12">Color:</label>
                                    <div class="color-options flex space-x-2" data-selected-color="Meron">
                                        <span
                                            class="color-box w-14 h-10 text-center flex items-center justify-center border rounded selected"
                                            data-color="Meron">Meron</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-center align-items-center">
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-l-md border border-gray-300"
                                        data-action="decrease">-</button>
                                    <input type="number"
                                        class="product-quantity-input w-10 text-center border-t border-b border-gray-300 py-1 focus:outline-none"
                                        value="1" min="1" readonly>
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-r-md border border-gray-300"
                                        data-action="increase">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </label>
                <div class="mt-4 flex space-x-2">
                    <button aria-pressed="false"
                        class="add-to-cart-btn w-1/2 px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                        data-product-id="2">Add to Cart</button>

                    <button
                        class="view-details-btn w-1/2 px-3 py-2 bg-gray-400 text-gray-800 text-sm rounded hover:bg-gray-500"
                        data-product-id="2">View Details</button>
                </div>
            </div>

            <div class="product-card bg-white border border-gray-200 rounded-lg p-4 text-center shadow-sm relative"
                data-product-id="3" data-base-price="1150" data-product-category="china-jacket">
                <label for=" product3" class="cursor-pointer block">
                    <img src="assets/product-img/china-winter-jacket-Olive.jpg" alt="China Winter Jacket"
                        class="mx-auto mb-3">
                    <div class="product-details">
                        <h4 class="text-lg font-semibold mb-1">China Winter Jacket</h4>
                        <div class="flex justify-center items-center space-x-2">
                            <span class="old-price text-sm text-orange-600 line-through">Tk 1,590</span>
                            <span class="new-price text-xl font-bold">Tk 1,150</span>
                        </div>
                        <div class="options mt-7 flex flex-col space-y-3 text-left">
                            <div class="flex items-center space-x-2 mb-5">
                                <label class="font-medium text-sm w-12">Size:</label>
                                <div class="size-options flex space-x-2" data-selected-size="M">
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="M">M</span>
                                    <span
                                        class="size-box selected w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="L">L</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XL">XL</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XXL">XXL</span>
                                </div>
                            </div>
                            <div class="flex items-center flex justify-between">
                                <div class="flex items-center space-x-2">
                                    <label class="font-medium text-sm w-12">Color:</label>
                                    <div class="color-options flex space-x-2" data-selected-color="Olive">
                                        <span
                                            class="color-box w-14 h-10 text-center flex items-center justify-center border rounded selected"
                                            data-color="Olive">Olive</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-center align-items-center">
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-l-md border border-gray-300"
                                        data-action="decrease">-</button>
                                    <input type="number"
                                        class="product-quantity-input w-10 text-center border-t border-b border-gray-300 py-1 focus:outline-none"
                                        value="1" min="1" readonly>
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-r-md border border-gray-300"
                                        data-action="increase">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </label>
                <div class="mt-4 flex space-x-2">
                    <button aria-pressed="false"
                        class="add-to-cart-btn w-1/2 px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                        data-product-id="3">Add to Cart</button>

                    <button
                        class="view-details-btn w-1/2 px-3 py-2 bg-gray-400 text-gray-800 text-sm rounded hover:bg-gray-500"
                        data-product-id="3">View Details</button>
                </div>
            </div>

            <div class="product-card bg-white border border-gray-200 rounded-lg p-4 text-center shadow-sm relative"
                data-product-id="4" data-base-price="1150" data-product-category="china-jacket">
                <label for=" product4" class="cursor-pointer block">
                    <img src="assets/product-img/china-winter-jacket-coffe.jpg" alt="China Winter Jacket"
                        class="mx-auto mb-3">
                    <div class="product-details">
                        <h4 class="text-lg font-semibold mb-1">China Winter Jacket</h4>
                        <div class="flex justify-center items-center space-x-2">
                            <span class="old-price text-sm text-orange-600 line-through">Tk 1,590</span>
                            <span class="new-price text-xl font-bold">Tk 1,150</span>
                        </div>
                        <div class="options mt-7 flex flex-col space-y-3 text-left">
                            <div class="flex items-center space-x-2 mb-5">
                                <label class="font-medium text-sm w-12">Size:</label>
                                <div class="size-options flex space-x-2" data-selected-size="M">
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="M">M</span>
                                    <span
                                        class="size-box selected w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="L">L</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XL">XL</span>
                                    <span
                                        class="size-box w-10 h-10 border border-gray-400 flex items-center justify-center text-sm hover:border-black rounded"
                                        data-size="XXL">XXL</span>
                                </div>
                            </div>
                            <div class="flex items-center flex justify-between">
                                <div class="flex items-center space-x-2">
                                    <label class="font-medium text-sm w-12">Color:</label>
                                    <div class="color-options flex space-x-2" data-selected-color="Coffe">
                                        <span
                                            class="color-box w-14 h-10 text-center flex items-center justify-center border rounded selected"
                                            data-color="Coffe">Coffe</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-center align-items-center">
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-l-md border border-gray-300"
                                        data-action="decrease">-</button>
                                    <input type="number"
                                        class="product-quantity-input w-10 text-center border-t border-b border-gray-300 py-1 focus:outline-none"
                                        value="1" min="1" readonly>
                                    <button
                                        class="quantity-btn bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-1 rounded-r-md border border-gray-300"
                                        data-action="increase">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </label>
                <div class="mt-4 flex space-x-2">
                    <button aria-pressed="false"
                        class="add-to-cart-btn w-1/2 px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700"
                        data-product-id="4">Add to Cart</button>

                    <button
                        class="view-details-btn w-1/2 px-3 py-2 bg-gray-400 text-gray-800 text-sm rounded hover:bg-gray-500"
                        data-product-id="4">View Details</button>
                </div>
            </div>


            </div>

        </section>

        <!-- Product details section -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">

            <div class="space-y-6">

                <div class="bg-white rounded-lg shadow-sm">
                    <div
                        class="section-title bg-gray-800 text-white font-bold p-3 rounded-t-lg flex justify-between items-center">
                        <span>1 Product Details</span>
                    </div>
                    <div
                        class="section-title font-bold p-3 flex justify-between items-center collapsible cursor-pointer">
                        <span>Size chart</span>
                        <span class="transform transition-transform duration-300 rotate-0">▼</span>
                    </div>
                    <div class="collapsible-content p-4 border-t border-gray-200 hidden">
                        <div class="mb-5 p-4 bg-white rounded-lg shadow-md border border-gray-100">
                            <p class="text-lg font-semibold text-gray-800 mb-4">Size chart - In inches </p>
                            <!-- (Expected Deviation &lt; 3%) -->

                            <div class="border-b border-gray-200" id="sizecharttab0" role="tablist">
                                <button
                                    class="nav-link-tailwind active inline-block p-4 text-sm font-medium text-blue-600 bg-gray-50 border-r border-t border-l border-gray-200 rounded-t-lg hover:text-blue-700 hover:bg-gray-100 focus:outline-none transition duration-150"
                                    id="tab-inch-0" data-bs-toggle="tab" data-bs-target="#sizechart-inch-0"
                                    type="button" role="tab" aria-controls="sizechart-inch-0"
                                    aria-selected="true">INCH</button>
                                <button
                                    class="nav-link-tailwind inline-block p-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none transition duration-150"
                                    id="tab-cm-0" data-bs-toggle="tab" data-bs-target="#sizechart-cm-0" type="button"
                                    role="tab" aria-controls="sizechart-cm-0" aria-selected="false">CM</button>
                            </div>

                            <div class="tab-content self-product-description pt-4" id="sizecharttab0Content">

                                <div class="tab-pane show active" id="sizechart-inch-0" role="tabpanel"
                                    aria-labelledby="tab-inch-0">
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                                            <thead class="bg-gray-100">
                                                <tr>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Size</th>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Chest (round)</th>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Length</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            M</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            39
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            27
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            L</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            40
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            28
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            XL</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            42
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            29
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            2XL</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            44
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            30
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="tab-pane hidden" id="sizechart-cm-0" role="tabpanel"
                                    aria-labelledby="tab-cm-0">
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 border border-gray-300">
                                            <thead class="bg-gray-100">
                                                <tr>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Size</th>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Chest (round)</th>
                                                    <th
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                                        Length</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            M</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            99.1
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            68.6
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            L</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            102.9
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            70.5
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            XL</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            109.2
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            72.4
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr class="hover:bg-gray-50">
                                                    <td>
                                                        <div
                                                            class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                            2XL</div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            114.3
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                            74.3
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <script>
                                // Tab switching logic
                                document.querySelectorAll('#sizecharttab0 button').forEach(function (btn) {
                                    btn.addEventListener('click', function (e) {
                                        e.preventDefault();

                                        // Remove 'active' and 'show' from all links and panes
                                        document.querySelectorAll('#sizecharttab0 button').forEach(function (el) {
                                            el.classList.remove('active', 'bg-gray-50', 'text-blue-600', 'border-r', 'border-t', 'border-l');
                                            el.classList.add('text-gray-500');
                                            // Add back borders for active state (Tailwind specific)
                                            if (el.getAttribute('aria-selected') === 'true') {
                                                el.classList.remove('border-r', 'border-t', 'border-l');
                                            }
                                        });
                                        document.querySelectorAll('#sizecharttab0Content .tab-pane').forEach(function (el) {
                                            el.classList.remove('show', 'active');
                                            el.classList.add('hidden'); // Hide non-active panes
                                        });

                                        // Activate the clicked button
                                        btn.classList.add('active', 'bg-gray-50', 'text-blue-600', 'border-r', 'border-t', 'border-l');
                                        btn.classList.remove('text-gray-500');

                                        // Show the target pane
                                        var targetId = btn.getAttribute('data-bs-target');
                                        var targetPane = document.querySelector(targetId);
                                        targetPane.classList.add('show', 'active');
                                        targetPane.classList.remove('hidden');
                                    });
                                });

                                // Initial setup for active tab style (INCH tab active by default)
                                document.getElementById('tab-inch-0').classList.add('active', 'bg-gray-50', 'text-blue-600', 'border-r', 'border-t', 'border-l');
                                document.getElementById('tab-inch-0').classList.remove('text-gray-500');
                            </script>
                        </div>
                    </div>

                    <div
                        class="section-title font-bold p-3 flex justify-between items-center collapsible cursor-pointer">
                        <span>Wash Guide</span>
                        <span class="transform transition-transform duration-300 rotate-0">▼</span>
                    </div>
                    <div class="collapsible-content p-4 border-t border-gray-200 hidden">
                        <div class="tab-popup-content">Wash in lukewarm water (30°C). Do not bleach. Tumble dry low or
                            air dry away from direct sunlight. Iron on low heat if needed.
                            <br>
                            <br>
                            <b>Special Notice Regarding Kashmeeri Products</b><br>
                            <b>Kashmeeri</b> always puts its best effort into ensuring that the attributes of the
                            product
                            displayed on the website (such as color, fabric quality, size, and fitting) remain
                            completely consistent with the item you purchase from us.

                            However, any discrepancies or minor inconsistencies in color or other features are
                            unintentional. Furthermore, <b>Kashmeeri</b> reserves the right to update or add any product
                            information at any time without prior notice.
                        </div>
                    </div>

                </div>

                <div class="bg-white rounded-lg shadow-sm">
                    <div class="section-title bg-gray-800 text-white font-bold p-3 rounded-t-lg">
                        2 Billing Details
                    </div>
                    <div class="billing-form p-4 space-y-3">
                        <div class="flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0">
                            <input type="text" placeholder="type your name"
                                class="w-full border border-gray-300 p-2 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <input type="tel" placeholder="phone number"
                                class="w-full border border-gray-300 p-2 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <input type="text" placeholder="type your full address"
                            class="w-full border border-gray-300 p-2 rounded-md focus:ring-blue-500 focus:border-blue-500 h-16">
                    </div>
                </div>
            </div>

            <div class="order-review-container bg-white rounded-lg shadow-lg h-fit">
                <div class="section-title bg-gray-800 text-white font-bold p-3 rounded-t-lg">
                    3 Order Review
                </div>
                <div class="order-summary p-4">

                    <div class="flex justify-between font-bold border-b border-gray-300">
                        <span class="w-3/4">PRODUCT</span>
                        <span class="w-1/4 text-right">SUBTOTAL</span>
                    </div>

                    <ul class="product-list space-y-2" id="selected-products"></ul>

                    <div class="flex justify-between pt-3 border-t border-gray-300 font-semibold text-lg">
                        <span>SUBTOTAL</span>
                        <span id="subtotal-price" class="text-right">Tk 0.00</span>
                    </div>

                    <div class="border-t border-gray-300 pt-3 mt-3 space-y-2">
                        <div class="font-semibold mb-1">Shipping</div>
                        <label class="flex justify-between items-center text-sm">
                            <input type="radio" name="shipping" value="70" class="text-blue-600 focus:ring-blue-500"
                                checked>
                            Inside Dhaka:
                            <span>70TK</span>
                        </label>
                        <label class="flex justify-between items-center text-sm">
                            <input type="radio" name="shipping" value="130" class="text-blue-600 focus:ring-blue-500">
                            Outside Dhaka:
                            <span>130TK</span>
                        </label>
                    </div>

                    <div
                        class="flex justify-between pt-3 mt-3 border-t border-gray-300 font-extrabold text-xl text-gray-800 bg-gray-100 p-2 rounded">
                        <span>TOTAL</span>
                        <span id="total-price" class="text-right">Tk 0.00</span>
                    </div>

                    <div class="text-center font-bold my-4 p-2 bg-gray-50 border border-gray-200 rounded">
                        Cash On Delivery
                    </div>

                    <button
                        class="place-order-btn w-full p-4 bg-red-600 hover:bg-red-700 text-white font-bold text-xl uppercase rounded transition duration-150">
                        PLACE ORDER
                    </button>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- PIXEL HELPER FUNCTION ---
        // সমস্ত fbq ইভেন্ট ট্র্যাক করতে এই ফাংশনটি ব্যবহার করা হবে
        function trackPixelEvent(eventName, params = {}) {
            if (typeof fbq === 'function') {
                fbq('track', eventName, params);
                console.log(`Pixel: ${eventName} fired.`, params); // Debug log
            }
        }

        // --- GLOBAL MODAL FUNCTIONS ---

        // 3. ViewContent/Product-Details Pixel (Product Details Modal)
        function openDetailsModal(productData) {
            const modal = document.getElementById('detailsModal');
            if (!modal) return;
            document.getElementById('modalProductName').textContent = productData.name;
            document.getElementById('modalProductImage').src = productData.imageSrc;
            document.getElementById('modalNewPrice').textContent = `Tk ${productData.newPrice}`;
            document.getElementById('modalOldPrice').textContent = `Tk ${productData.oldPrice}`;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            const finalPrice = parseFloat(productData.newPrice);

            // 3. ViewContent Pixel (Facebook)
            trackPixelEvent('ViewContent', {
                content_name: productData.name,
                content_ids: [productData.id],
                content_type: 'product',
                value: finalPrice,
                currency: 'BDT',
                product_category: productData.category // Category added
            });

            // GTM DataLayer Push (View Item Event)
            if (window.dataLayer) {
                window.dataLayer.push({
                    'event': 'view_item',
                    'ecommerce': {
                        'currency': 'BDT',
                        'value': finalPrice,
                        'items': [{
                            'item_id': productData.id,
                            'item_name': productData.name,
                            'item_category': productData.category, // Category added
                            'price': finalPrice,
                        }]
                    }
                });
                console.log("DataLayer Push: View Item Event Fired");
            }
        }

        window.closeDetailsModal = function () {
            const modal = document.getElementById('detailsModal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }

        // 2. View/Content Pixel (Image Modal)
        function openImageModal(imageSrc, imageAlt, productId, productPrice, productCategory) {
            const modal = document.getElementById('imageModal');
            const fullScreenImage = document.getElementById('fullScreenImage');
            if (!modal || !fullScreenImage) return;

            fullScreenImage.src = imageSrc;
            fullScreenImage.alt = imageAlt;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // 2. ViewContent Pixel (Facebook)
            trackPixelEvent('ViewContent', {
                content_name: imageAlt,
                content_ids: [productId],
                content_type: 'product',
                value: productPrice,
                currency: 'BDT',
                product_category: productCategory // Category added
            });

            // GTM DataLayer Push (View Item Event)
            if (window.dataLayer) {
                window.dataLayer.push({
                    'event': 'view_item',
                    'ecommerce': {
                        'currency': 'BDT',
                        'value': productPrice,
                        'items': [{
                            'item_id': productId,
                            'item_name': imageAlt,
                            'item_category': productCategory, // Category added
                            'price': productPrice,
                        }]
                    }
                });
                console.log("DataLayer Push: View Item Event Fired");
            }
        }

        window.closeModal = function () {
            const modal = document.getElementById('imageModal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }

        // --- DOM CONTENT LOADED ---
        document.addEventListener('DOMContentLoaded', () => {
            const productCards = document.querySelectorAll('.product-card');
            const selectedProductsList = document.getElementById('selected-products');
            const subtotalPriceSpan = document.getElementById('subtotal-price');
            const totalPriceSpan = document.getElementById('total-price');
            const shippingRadios = document.querySelectorAll('input[name="shipping"]');
            const collapsibleTitles = document.querySelectorAll('.collapsible');
            const placeOrderButton = document.querySelector('.place-order-btn');

            let shoppingCart = [];
            let cartItemCounter = 0;

            // Helper function to extract price amount from text
            function extractPrice(priceText) {
                return parseFloat(priceText.replace(/[^0-9.-]+/g, ""));
            }

            // Function to calculate and update totals
            function calculateTotal() {
                let subtotal = 0;
                shoppingCart.forEach(item => {
                    subtotal += item.price;
                });

                subtotalPriceSpan.textContent = `Tk ${subtotal.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 2 })}`;

                const shippingCost = parseFloat(document.querySelector('input[name="shipping"]:checked').value);
                const total = subtotal + shippingCost;

                totalPriceSpan.textContent = `${total.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}Tk`;
            }

            // Function to handle product removal from list (via X button)
            function removeProduct(event) {
                if (event.target.closest('.delete-btn')) {
                    const listItem = event.target.closest('li');
                    if (!listItem) return;

                    const cartIdToRemove = parseInt(listItem.dataset.cartId);
                    shoppingCart = shoppingCart.filter(item => item.cartId !== cartIdToRemove);
                    listItem.remove();
                    calculateTotal();
                }
            }

            // Function to update the Order Review list
            function updateOrderSummary() {
                selectedProductsList.innerHTML = '';

                shoppingCart.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.dataset.cartId = item.cartId;
                    listItem.classList.add('py-2', 'border-gray-100');

                    listItem.innerHTML = `
                <div class="flex justify-between items-center bg-gray-50 p-3 rounded-md shadow-sm w-full">

                     <div class="flex items-start space-x-3">
                        <img src="${item.image}"
                            alt="Product"
                            class="h-24 w-14 border border-gray-200 rounded object-cover">

                            <div class="flex flex-col space-y-1">
                                <span class="font-semibold text-gray-800">${item.name}</span>
                                <span class="text-sm text-gray-600">Category: ${item.category}</span>
                                <span class="text-sm text-gray-600">Size: ${item.size}</span>
                                <span class="text-sm text-gray-600">Color: ${item.color}</span>
                                <span class="text-sm text-gray-600">Quantity: ${item.quantity}</span>
                            </div>
                    </div>

                    <div class="flex flex-col items-end space-y-7 ml-auto w-32 text-right">
                        <button
                            class="delete-btn w-7 h-7 rounded-full bg-black text-white flex items-center justify-center hover:bg-red-600 transition"
                            aria-label="Remove item">
                            ✕
                        </button>
                        <span class="item-price font-semibold text-gray-800 text-lg">
                            Tk ${item.price.toFixed(2)}
                        </span>
                    </div>
                </div>
            `;
                    selectedProductsList.appendChild(listItem);
                });

                calculateTotal();
            }

            // --- FUNCTION: Collect all data and SEND TO SERVER (Purchase Pixel & GTM) ---
            async function handlePlaceOrder(e) {
                e.preventDefault();

                // 1. Collect Billing Details (User Data for Advanced Matching)
                const nameInput = document.querySelector('input[placeholder="type your name"]').value.trim();
                const phoneInput = document.querySelector('input[placeholder="phone number"]').value.trim();
                const addressInput = document.querySelector('input[placeholder="type your full address"]').value.trim();

                // Simple validation check
                if (!nameInput || !phoneInput || !addressInput || shoppingCart.length === 0) {
                    alert("দয়া করে সমস্ত বিলিং তথ্য পূরণ করুন এবং কমপক্ষে একটি পণ্য কার্টে যোগ করুন।");
                    return;
                }

                // 2. Calculate Totals & Shipping
                const shippingRadio = document.querySelector('input[name="shipping"]:checked');
                const shippingCost = parseFloat(shippingRadio.value);
                const subtotal = shoppingCart.reduce((sum, item) => sum + item.price, 0);
                const total = subtotal + shippingCost;


                // 3. Prepare Data for API, Facebook Pixel, and GTM

                // Data for API Payload (Backend)
                const orderedProducts = shoppingCart.map(item => {
                    let finalPrice;

                    // মূল্য সঠিকভাবে সংখ্যায় রূপান্তর করা:
                    if (typeof item.price === 'string') {
                        // যদি এটি একটি স্ট্রিং হয় (যেমন 'Tk 1150.00'), তবে এটিকে সংখ্যায় রূপান্তর করো।
                        // price: parseFloat(item.price.replace('Tk', '').replace(',', '').trim()),

                        // এখানে শুধুমাত্র সংখ্যাগুলো রাখুন।
                        const cleanedPrice = item.price.replace(/[^0-9.]/g, '');
                        finalPrice = parseFloat(cleanedPrice);

                    } else if (typeof item.price === 'number') {
                        // যদি এটি ইতিমধ্যেই একটি সংখ্যা হয় (যেমন 1150), তবে সরাসরি ব্যবহার করো।
                        finalPrice = item.price;
                    } else {
                        // যদি অন্য কোনো ডেটা টাইপ হয় বা null/undefined হয়, তবে 0 ধরো।
                        finalPrice = 0;
                    }

                    // নিশ্চিত করুন যে price ফিল্ডে কোনো NaN (Not a Number) নেই।
                    if (isNaN(finalPrice)) {
                        finalPrice = 0;
                    }

                    return {
                        image: item.image,
                        name: item.name,
                        category: item.category,
                        price: finalPrice, // সংশোধিত মূল্য
                        size: item.size,
                        color: item.color,
                        quantity: item.quantity,
                        productId: item.productId
                    };
                });

                const productNames = shoppingCart.map(item => item.name);

                // Data for Facebook Pixel 'contents' (Standard Format)
                const pixelContents = shoppingCart.map(item => ({
                    id: item.productId,
                    quantity: item.quantity,
                    item_price: item.basePrice,
                    product_name: item.name,
                    product_category: item.category
                }));

                // Data for GTM 'ecommerce.items' (GA4 Format + Custom Dimensions)
                const gtmItems = shoppingCart.map(item => ({
                    'item_id': item.productId,
                    'item_name': item.name,
                    'price': item.basePrice,
                    'quantity': item.quantity,
                    'item_category': item.category,
                    'item_size': item.size,
                    'item_color': item.color
                }));


                // 4. Fire Facebook Purchase Pixel (Enhanced with Advanced Matching)
                trackPixelEvent('Purchase', {
                    value: total,
                    currency: 'BDT',
                    content_type: 'product',
                    num_items: shoppingCart.reduce((sum, item) => sum + item.quantity, 0),
                    content_name: productNames.join(', '),
                    contents: pixelContents,

                    // Advanced Matching (AM) Data
                    fn: nameInput, // Full Name
                    ph: phoneInput, // Phone number
                    ct: addressInput // City/Address
                });

                // 5. Fire GTM DataLayer Push (Enhanced for GA4 and User Data)
                if (window.dataLayer) {
                    window.dataLayer.push({
                        'event': 'purchase',
                        'ecommerce': {
                            'transaction_id': 'KSMR' + Date.now().toString().slice(-6),
                            'value': total,
                            'currency': 'BDT',
                            'shipping': shippingCost,
                            'items': gtmItems
                        },
                        // Custom Customer Data Layer
                        'customerData': {
                            'full_name': nameInput,
                            'phone': phoneInput,
                            'address': addressInput
                        }
                    });
                    console.log("DataLayer Push: Purchase Event Fired (Enhanced)");
                }




                // 6. Construct Final Order Object for API
                const finalOrder = {
                    // 1. কাস্টমার/বিলিং ডিটেইলস (Billing Details)
                    billingDetails: {
                        name: nameInput,
                        phone: phoneInput,
                        address: addressInput,
                        // যদি আপনার সার্ভার city, postalCode-ও আশা করে, তবে এখানে যোগ করুন:
                        // city: cityInput, 
                        // postalCode: postalCodeInput
                    },

                    // 2. অর্ডার করা প্রোডাক্টস (Ordered Products)
                    orderedProducts: orderedProducts,

                    // 3. শিপিং ইনফো (ShippingInfo) - ডাটাবেস স্কিমা অনুযায়ী আলাদা অবজেক্ট
                    shippingInfo: {
                        type: 'Inside Dhaka', // আপনার ব্যবসার প্রয়োজন অনুযায়ী সেট করুন
                        cost: shippingCost // শিপিং খরচ
                    },

                    // 4. সামারি (Summary)
                    summary: {
                        subtotal: subtotal,
                        total: total,
                        paymentMethod: "Cash On Delivery"
                        // Note: shipping cost summary-এর মধ্যে আলাদা ফিল্ড হিসেবে প্রয়োজন নেই,
                        // কারণ এটি shippingInfo.cost-এ আছে এবং total-এ যুক্ত করা হয়েছে।
                    },

                    // 5. উৎস (Source)
                    source: 'Landing Page'
                };


                console.log("Final Order Object:", finalOrder); // Debug log
                // 7. API Call to Node.js Server (REAL POST REQUEST - Unchanged Logic)
                // const API_ENDPOINT = 'http://localhost:3000/api/orders';
                const API_ENDPOINT = 'https://api.kashmeeri.com/api/orders';

                try {
                    placeOrderButton.disabled = true;
                    placeOrderButton.textContent = 'অর্ডার প্রসেসিং হচ্ছে...';

                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(finalOrder)
                    });

                    if (!response.ok) {
                        // যদি সার্ভার 4xx বা 5xx এরর দেয়
                        const errorData = await response.json();
                        const serverErrorMessage = errorData.message || 'অজানা সার্ভার ত্রুটি।';
                        throw new Error(`সার্ভার ত্রুটি: ${response.status} - ${serverErrorMessage}`);
                    }

                    const result = await response.json();

                    if (result && result.orderId) {
                        // 1. বড় Order ID থেকে শেষ ৪টি সংখ্যা নেওয়া
                        const fullOrderId = result.orderId;
                        const lastFourDigits = fullOrderId.slice(-4);

                        // 2. মোট মূল্যের জন্য ফলব্যাক ব্যবহার করা (যদি total মিসিং থাকে)
                        const orderTotal = (result.summary && result.summary.total) ? result.summary.total : 'মূল্য উপলব্ধ নয়';

                        // 3. অতিরিক্ত হোয়াইটস্পেস ছাড়া পরিষ্কার মেসেজ তৈরি করা
                        const informativeMessage = `
                                        অর্ডার সফলভাবে সম্পন্ন হয়েছে! 🚀
                                        আপনার অর্ডারটি নিশ্চিত করা হয়েছে।

                                        Order ID :25 ${lastFourDigits}
                                        মোট মূল্য: ${orderTotal} টাকা

                                        শিগগিরই ডেলিভারির জন্য আপনার সাথে যোগাযোগ করা হবে। ধন্যবাদ!
        `;

                        // .trim() ব্যবহার করে শুরুতে/শেষে থাকা অপ্রয়োজনীয় লাইন ব্রেক বা স্পেস সরানো
                        alert(informativeMessage.trim());

                        // 4. অর্ডার সম্পন্ন হওয়ার পর ফর্ম এবং কার্ট রিসেট করা
                        shoppingCart = [];
                        updateOrderSummary();

                    } else {
                        throw new Error("অর্ডার কনফার্মেশনে সমস্যা হয়েছে। সার্ভার থেকে কোনো অর্ডার আইডি পাওয়া যায়নি।");
                    }

                } catch (error) {
                    console.error('Fetch Error:', error);
                    alert(`অর্ডার দিতে ব্যর্থ: ${error.message}. অনুগ্রহ করে আপনার ডেটা বা সার্ভার চেক করুন।`);

                } finally {
                    placeOrderButton.disabled = false;
                    placeOrderButton.textContent = 'PLACE ORDER';
                }
            }






            // --- 5. Add to Cart button logic (AddToCart Pixel) ---
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                // Initialize button state (Unchanged)
                btn.textContent = "Add to Cart";
                btn.classList.remove("bg-red-600", "hover:bg-red-700");
                btn.classList.add("bg-green-600", "hover:bg-green-700");
                btn.removeAttribute("data-in-cart");




                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const card = e.target.closest('.product-card');
                    const productId = card.dataset.productId;
                    const productName = card.querySelector('h4').textContent;
                    const basePrice = parseFloat(card.dataset.basePrice);
                    const productCategory = card.dataset.productCategory || 'Uncategorized';
                    const quantity = parseInt(card.querySelector('.product-quantity-input').value);
                    const size = card.querySelector('.size-options').dataset.selectedSize;
                    const color = card.querySelector('.color-options').dataset.selectedColor;
                    const productImgSrc = card.querySelector('img').src;

                    const newItem = {
                        cartId: ++cartItemCounter,
                        productId: productId,
                        name: productName,
                        category: productCategory,
                        size: size,
                        color: color,
                        quantity: quantity,
                        basePrice: basePrice,
                        price: basePrice * quantity,
                        image: productImgSrc
                    };
                    shoppingCart.push(newItem);

                    // 5. Add to Cart Pixel
                    trackPixelEvent('AddToCart', {
                        content_name: productName,
                        content_ids: [productId],
                        content_type: 'product',
                        num_items: quantity,
                        value: newItem.price,
                        currency: 'BDT',
                        contents: [{ id: productId, quantity: quantity, item_price: basePrice, product_name: productName, product_category: productCategory }]
                    });

                    // GTM DataLayer Push (Add to Cart Event)
                    if (window.dataLayer) {
                        window.dataLayer.push({
                            'event': 'add_to_cart',
                            'ecommerce': {
                                'currency': 'BDT',
                                'value': newItem.price,
                                'items': [{
                                    'item_id': newItem.productId,
                                    'item_name': newItem.name,
                                    'item_category': newItem.category,
                                    'price': newItem.basePrice,
                                    'quantity': newItem.quantity
                                }]
                            }
                        });
                    }


                    // Visual feedback (Unchanged)
                    // e.target.textContent = "Added to Cart!";
                    // e.target.classList.remove("bg-green-600", "hover:bg-green-700");
                    // e.target.classList.add("bg-blue-600", "hover:bg-blue-700");
                    // setTimeout(() => {
                    //     e.target.textContent = "Add to Cart";
                    //     e.target.classList.remove("bg-blue-600", "hover:bg-blue-700");
                    //     e.target.classList.add("bg-green-600", "hover:bg-green-700");
                    // }, 500);


                    // ✅ নতুন Toast Notification কল করুন
                    showToast(`'${newItem.name}' কার্টে যোগ হয়েছে!`);






                    updateOrderSummary();
                });
            });

            // --- View Details Button Logic (ViewContent Pixel) ---
            document.querySelectorAll('.view-details-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation();

                    const productCard = button.closest('.product-card');
                    if (!productCard) return;
                    const name = productCard.querySelector('.product-details h4').textContent.trim();
                    const imageSrc = productCard.querySelector('img').src;
                    const newPriceText = productCard.querySelector('.new-price').textContent.replace('Tk', '').replace(/,/g, '').trim();
                    const oldPriceText = productCard.querySelector('.old-price').textContent.replace('Tk', '').replace(/,/g, '').replace('.00', '').trim();
                    const productCategory = productCard.dataset.productCategory || 'Uncategorized';

                    const productData = {
                        id: productCard.dataset.productId,
                        name: name,
                        imageSrc: imageSrc,
                        newPrice: newPriceText,
                        oldPrice: oldPriceText,
                        category: productCategory // Category added to data object
                    };
                    openDetailsModal(productData); // Calls global function and fires ViewContent pixel
                });
            });


            // --- Product Image Click Logic (ViewContent/Image Pixel) ---
            document.querySelectorAll('.product-card img').forEach(img => {
                img.addEventListener('click', function (event) {
                    event.preventDefault();
                    event.stopPropagation();

                    const card = this.closest('.product-card');
                    const productId = card.dataset.productId;
                    const productPrice = parseFloat(card.dataset.basePrice);
                    const productCategory = card.dataset.productCategory || 'Uncategorized';

                    openImageModal(this.src, this.alt, productId, productPrice, productCategory); // Category passed to modal function
                });
            });

            // --- 4. Billing Details Input Field Logic (Lead Pixel) ---
            const billingInputs = [
                document.querySelector('input[placeholder="type your name"]'),
                document.querySelector('input[placeholder="phone number"]'),
                document.querySelector('input[placeholder="type your full address"]')
            ];
            let leadFired = false;

            function checkBillingDetails() {
                if (leadFired) return;

                const nameInput = document.querySelector('input[placeholder="type your name"]').value.trim();
                const phoneInput = document.querySelector('input[placeholder="phone number"]').value.trim();
                const addressInput = document.querySelector('input[placeholder="type your full address"]').value.trim();
                const inputValues = [nameInput, phoneInput, addressInput];

                const filledCount = inputValues.filter(val => val !== '').length;

                if (filledCount === inputValues.length) {

                    // 🚨 সিনট্যাক্স এরর ফিক্স করা হলো
                    const subtotal = shoppingCart.reduce((sum, item) => sum + item.price, 0);

                    const orderedProducts = shoppingCart.map(item => ({ id: item.productId, name: item.name }));
                    const contentIds = orderedProducts.map(item => item.id);
                    const contentNames = orderedProducts.map(item => item.name).join(', ');
                    const contentCategories = shoppingCart.map(item => item.category).filter((value, index, self) => self.indexOf(value) === index).join(', ');


                    // 4. Lead Pixel: Dynamic Value, Content, & Advanced Matching (AM) Data
                    trackPixelEvent('Lead', {
                        content_name: contentNames || 'Filled Billing Details',
                        content_ids: contentIds.length > 0 ? contentIds : ['LEAD_GENERAL'],
                        content_type: 'product',
                        value: subtotal > 0 ? subtotal : 50,
                        currency: 'BDT',
                        product_category: contentCategories || 'General Lead',

                        // Advanced Matching (AM) Data:
                        fn: nameInput,
                        ph: phoneInput,
                        ct: addressInput
                    });

                    // GTM DataLayer Push (Lead Event)
                    if (window.dataLayer) {
                        window.dataLayer.push({
                            'event': 'generate_lead',
                            'ecommerce': {
                                'value': subtotal > 0 ? subtotal : 50,
                                'currency': 'BDT',
                                'content_name': contentNames || 'Filled Billing Details'
                            },
                            'customerData': {
                                'full_name': nameInput,
                                'phone': phoneInput,
                                'address': addressInput
                            },
                            'productCategory': contentCategories || 'General Lead'
                        });
                    }

                    leadFired = true;
                }
            }

            billingInputs.forEach(input => {
                input.addEventListener('blur', checkBillingDetails);
            });

            placeOrderButton.addEventListener('click', handlePlaceOrder);
            selectedProductsList.addEventListener('click', removeProduct);


            productCards.forEach(card => {
                // Size Selector Logic (Unchanged)
                card.querySelectorAll('.size-box').forEach(sizeBox => {
                    sizeBox.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const sizeOptionsContainer = card.querySelector('.size-options');
                        sizeOptionsContainer.querySelectorAll('.size-box').forEach(box => box.classList.remove('selected', 'ring-2', 'ring-offset-1', 'ring-green-500'));
                        sizeBox.classList.add('selected', 'ring-2', 'ring-offset-1', 'ring-green-500');
                        sizeOptionsContainer.dataset.selectedSize = sizeBox.dataset.size;
                    });
                });

                // Color Selector Logic (Unchanged)
                card.querySelectorAll('.color-box').forEach(colorBox => {
                    colorBox.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const colorOptionsContainer = card.querySelector('.color-options');
                        colorOptionsContainer.querySelectorAll('.color-box').forEach(box => box.classList.remove('selected', 'ring-2', 'ring-offset-1', 'ring-green-500'));
                        colorBox.classList.add('selected', 'ring-2', 'ring-offset-1', 'ring-green-500');
                        colorOptionsContainer.dataset.selectedColor = colorBox.dataset.color;
                    });
                });

                // Quantity Control Logic (Unchanged)
                card.querySelectorAll('.quantity-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const action = button.dataset.action;
                        const quantityInput = card.querySelector('.product-quantity-input');
                        let currentVal = parseInt(quantityInput.value);
                        if (action === 'increase') {
                            currentVal++;
                        } else if (action === 'decrease' && currentVal > 1) {
                            currentVal--;
                        }
                        quantityInput.value = currentVal;
                    });
                });
            });

            shippingRadios.forEach(radio => {
                radio.addEventListener('change', calculateTotal);
            });

            // Collapsible toggle (Unchanged)
            collapsibleTitles.forEach(title => {
                title.addEventListener('click', function () {
                    this.classList.toggle('active');
                    const content = this.nextElementSibling;
                    const arrow = this.querySelector('span:last-child');
                    if (arrow) {
                        arrow.classList.toggle('rotate-180');
                    }
                    if (content) {
                        if (content.classList.contains('hidden')) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    }
                });
            });

            // Initial load calculation (Unchanged)
            calculateTotal();
        });



        // --- FUNCTION: Show Toast Notification ---
        function showToast(message, type = 'success', duration = 3000) {
            const toast = document.getElementById('toast-notification');
            const messageElement = document.getElementById('toast-message');

            // Reset classes and set message
            toast.classList.remove('hidden', 'toast-success');
            messageElement.textContent = message;

            // Apply success style
            if (type === 'success') {
                toast.classList.add('toast-success');
            }
            // আপনি চাইলে error বা warning এর জন্য অন্য স্টাইল যুক্ত করতে পারেন

            // Auto-hide the toast after the duration
            setTimeout(() => {
                toast.classList.add('hidden');
            }, duration);
        }


    </script>

    <!-- image modal -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center hidden"
        onclick="closeModal()">
        <div class="relative max-w-4xl max-h-full mx-auto" onclick="event.stopPropagation()">

            <button onclick="closeModal()"
                class="absolute top-4 right-4 text-white text-4xl font-light hover:text-gray-300 z-50"
                aria-label="Close modal">
                &times;
            </button>

            <img id="fullScreenImage" src="" alt="Full Screen Product Image"
                class="max-w-full max-h-[90vh] object-contain shadow-2xl rounded-lg cursor-pointer"
                onclick="closeModal()">
        </div>
    </div>

    <!-- product details modal -->
    <div id="detailsModal" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl mx-4 md:mx-auto p-6 relative max-h-[90vh] overflow-y-auto"
            onclick="event.stopPropagation()">

            <button onclick="closeDetailsModal()"
                class="absolute top-3 right-3 text-gray-700 text-2xl font-light hover:text-gray-900"
                aria-label="Close details modal">
                &times;
            </button>

            <h2 id="modalProductName" class="text-2xl font-bold mb-4 border-b pb-2"></h2>

            <div class="md:flex md:space-x-4">
                <img id="modalProductImage" src="" alt="Product Image"
                    class="w-full md:w-1/2 h-auto object-contain rounded-lg mb-4 shadow-md">

                <div class="md:w-1/2">
                    <div class="mb-4">
                        <span class="text-3xl font-bold text-green-600" id="modalNewPrice"></span>
                        <span class="text-base text-orange-600 line-through ml-2" id="modalOldPrice"></span>
                    </div>

                    <p class="text-gray-700 mb-6" id="modalProductDescription">
                        <span class="font-bold text-black-600">Mens Premium China Jacket</span><br>
                        <span class="font-bold text-black-600">Premium Jacket:</span><br>
                        Regular fit.<br>
                        China Bonded, Heavy Weight 300 GSM.<br>
                        Bonded fabric has the ability to wick moisture away to keep you dry and also has insulating<br>
                        properties.<br>
                        Full 100% Wind resistant.<br>
                        <span class="font-bold text-black-600">FABRIC:</span><br>
                        China Bonded Fabric.<br>
                        Composition: 100% Super Micro Spun Polyester.<br>
                        Quality: One Side Brushed.<br>
                        Stylis and super comfortable.<br>
                        Preshrunk to minimize shrinkage.<br>
                        Size: M, L, XL, 2XL

                    </p>
                    <!-- <p>
                        প্রিমিয়াম চায়না জ্যাকেট<br>
                        চায়না প্রিমিয়াম বন্ডেড ফেব্রিক্স ।<br>
                        সম্পূর্ণ বাতাস প্রতিরোধক।<br>
                        জিএসএম : ৩০০+<br>
                        সাইজ : M, L, XL , XXL
                    </p> -->
                </div>
            </div>

            <div class="flex justify-end border-t pt-4">
                <button onclick="closeDetailsModal()"
                    class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition duration-150">বন্ধ
                    করুন</button>
            </div>

        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast-notification" class="fixed top-5 right-0 md:right-5 z-50 p-4 rounded-lg shadow-xl hidden"
        style="min-width: 250px;">
        <div class="flex items-center space-x-3">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span id="toast-message" class="text-white font-semibold"></span>
        </div>
    </div>

    <footer class="bg-gray-900 text-white text-[10px] sm:text-xs py-2 px-4 border-t border-gray-800">
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center space-y-1 sm:space-y-0">

            <div class="flex flex-col sm:flex-row items-center space-y-1 sm:space-y-0 sm:space-x-4">
                <p class="order-2 sm:order-1 whitespace-nowrap">&copy; 2024 Kashmeeri. All Rights Reserved.</p>

                <div class="order-1 sm:order-2 flex space-x-3">

                    <a href="mailto:info@kashmeeri.com"
                        class="hover:text-green-400 whitespace-nowrap flex items-center">
                        <img src="assets/icon/contact-us.png" alt="Email" class="w-4 h-4 mr-1">
                        info@kashmeeri.com
                    </a>

                    <a href="tel:+8801825302915" class="hover:text-green-400 whitespace-nowrap flex items-center">
                        <img src="assets/icon/phone.png" alt="Phone" class="w-4 h-4 mr-1">
                        +880-1879566691
                    </a>
                </div>
            </div>

            <div class="flex space-x-5 mt-1 sm:mt-0">

                <a href="https://www.facebook.com/profile.php?id=61578281266001" target="_blank" title="Facebook"
                    class="hover:opacity-75 transition duration-300">
                    <img src="assets/icon/facebook.png" alt="Facebook" class="w-5 h-5">
                </a>

                <a href="https://www.facebook.com/profile.php?id=61578281266001" target="_blank" title="Instagram"
                    class="hover:opacity-75 transition duration-300">
                    <img src="assets/icon/instagram.png" alt="Instagram" class="w-5 h-5">
                </a>
            </div>
        </div>
    </footer>


</body>

</html>